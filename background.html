<html>
  <script>
      function addToStore(performance){
        var currentPerformance = JSON.parse(localStorage["currentPerformance"]);
        if(currentPerformance == null){
           localStorage["currentPerformance"] = JSON.stringify([performance]);
        }
        else{
            currentPerformance.push(performance);
            localStorage["currentPerformance"] = JSON.stringify(performance);
        }
      }

      chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
            if(request.isPerformanceObject){
               var performanceObject = request.performance;
               localStorage["currentHostname"] = performanceObject.hostname;
               addToStore(performanceObject);
            }
      });

      function getCurrentFavicon(){
        chrome.windows.getLastFocused(function(window){
            chrome.tabs.getAllInWindow(window.id, function(tabs){
                var currentHostname = localStorage["currentHostname"]
                console.log(tabs);
                var current = tabs.filter(function(tab){
                    return tab.url.indexOf(currentHostname) > -1;
                });
                var favicon = current[0].favIconUrl;
            })
        });
      }
  </script>
</html>

<html>

  <body>

  </body>
</html>